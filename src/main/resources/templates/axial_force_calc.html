<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{axialForceCalc.title}">Title</title>

    <link th:href="@{/css/bootstrap.css}" rel="stylesheet">
    <link th:href="@{/css/all.css}" rel="stylesheet">
    <script th:src="@{/js/bootstrap.bundle.js}"></script>
</head>
<body>
    <div th:replace="fragments/header :: header"></div>
    <main role="main">
        <div class="container">
            <h3 th:text="#{axialForceCalc.html.title}">Page title</h3>
        </div>
        <div class="row">

        <div class="col mx-3">
        <div class="container">
            <h4 class="py-3" th:text="#{axialForceCalc.form.title}">Input data</h4>
            <div class="col-md-7">
            <form th:method="POST" th:action="@{/axial-force-calculation}" th:object="${ccwbInput}">
                <div class="row mb-2">
                    <label class="col-md-2 col-form-label" th:text="#{axialForceCalc.form.sectionType.name}">Section</label>
                    <div class="btn-group col" role="group" id="sectionType">
                        <input type="radio" class="btn-check" onclick="javascript:chooseStandard();" id="I_BEAM" value="I_BEAM" name="sectionType" autocomplete="off" checked>
                        <label class="btn btn-secondary" for="I_BEAM" th:title="#{axialForceCalc.form.sectionType.I_BEAM}">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="i-beam" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="m 1,0 h 14 a 1 1 0 0 1 0 2 H 10.1 a 1.4 1.4 0 0 0 -1.4 1.4 v 9.2 a 1.4 1.4 0 0 0 1.4 1.4 H 15 a 1 1 0 0 1 0 2 H 1 a 1 1 0 0 1 0 -2 h 4.9 a 1.4 1.4 0 0 0 1.4 -1.4 V 3.4 a 1.4 1.4 0 0 0 -1.4 -1.4 H 1 a 1 1 0 0 1 0 -2 Z"/>
                            </svg>
                        </label>
                        <input type="radio" class="btn-check" onclick="javascript:chooseStandard();" id="WELDED_I_BEAM" value="WELDED_I_BEAM" name="sectionType" autocomplete="off">
                        <label class="btn btn-secondary" for="WELDED_I_BEAM" th:title="#{axialForceCalc.form.sectionType.WELDED_I_BEAM}">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="welded-i-beam" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <rect width="16" height="2" x="0" y="0" ry="1" />
                                <rect width="16" height="2" x="0" y="14" ry="1" />
                                <rect width="1.4" height="8" x="7.3" y="4" ry="0.7" />
                            </svg>
                        </label>
                        <input type="radio" class="btn-check" onclick="javascript:chooseStandard();" id="U_PROFILE" value="U_PROFILE" name="sectionType" autocomplete="off">
                        <label class="btn btn-secondary" for="U_PROFILE" th:title="#{axialForceCalc.form.sectionType.U_PROFILE}">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="u-profile" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="m 11.5,0 a 1 1 0 0 1 0 2 H 6.6 a 1.4 1.4 0 0 0 -1.4 1.4 v 9.2 a 1.4 1.4 0 0 0 1.4 1.4 h 4.9 a 1 1 0 0 1 0 2 H 3.8 V 0 Z"/>
                            </svg>
                        </label>
                        <input type="radio" class="btn-check" onclick="javascript:chooseStandard();" id="HOLLOW" value="HOLLOW" name="sectionType" autocomplete="off">
                        <label class="btn btn-secondary" for="HOLLOW" th:title="#{axialForceCalc.form.sectionType.HOLLOW}">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="hollow-profile" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.25,0h11.51C14.99,0,16,1.01,16,2.25v11.51c0,1.24-1.01,2.25-2.25,2.25H2.25C1.01,16,0,14.99,0,13.75V3h1.5v10.75 c0,0.42,0.34,0.75,0.75,0.75h11.5c0.42,0,0.75-0.34,0.75-0.75V2.25c0-0.42-0.34-0.75-0.75-0.75H2.25C1.83,1.5,1.5,1.84,1.5,2.25V3H0 V2.25C0,1.01,1.01,0,2.25,0z"/>
                            </svg>
                        </label>
                    </div>
                </div>
                <div id="shaped_section_input">
                    <div class="row mb-2">
                        <label for="sectionStandard" class="col-2 col-form-label"
                               th:text="#{axialForceCalc.form.standard.name}">Standard</label>
                        <div class="col">

                            <select class="form-select" id="sectionStandard" th:name="standard" th:field="*{sectionStandard}">
                                <option id="gost8239-89" value="gost8239-89"
                                        th:text="#{axialForceCalc.form.standard.gost8239-89}">GOST 8239-89</option>
                                <option id="gost19425-74-i-beam" value="gost19425-74-i-beam"
                                        th:text="#{axialForceCalc.form.standard.gost19425-74-i-beam}">GOST 19425-74*</option>
                                <option id="gost8240-89p" value="gost8240-89-parallel-flange"
                                        th:text="#{axialForceCalc.form.standard.gost8240-89-parallel-flange}" style="display: none">GOST 8240-89(with parallel flange)</option>
                                <option id="gost8240-89s" value="gost8240-89-slope-flange"
                                        th:text="#{axialForceCalc.form.standard.gost8240-89-slope-flange}" style="display: none">GOST 8240-89(with slope flange)</option>
                                <option id="gost302245-94r" value="gost302245-94-rectangle"
                                        th:text="#{axialForceCalc.form.standard.gost302245-94-rectangle}" style="display: none">GOST 302245-94(rectangle profiles)</option>
                                <option id="gost302245-94s" value="gost302245-94-square"
                                        th:text="#{axialForceCalc.form.standard.gost302245-94-square}" style="display: none">GOST 302245-94(square profiles)</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-2">
                        <label for="sectionNumber" class="col-2 col-form-label">#</label>
                        <div class="col">
                            <select class="form-select" id="sectionNumber" th:name="sectionNumber" th:field="*{sectionNumber}">
                                <option value="" th:text="#{axialForceCalc.form.chooseProfile}">Choose profile</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="welded_section_input" style="display: none">
                    <div class="row mb-2">
                        <label class="col-2 col-form-label">Welded beam</label>
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <div class="input-group">
                                        <input type="text" class="form-control" th:placeholder="#{axialForceCalc.form.weldedBeam.flangeWidth}"
                                               th:field="*{flangeWidth}" />
                                        <div class="input-group-append">
                                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.mm}">mm</span>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" th:placeholder="#{axialForceCalc.form.weldedBeam.flangeThickness}"
                                               th:field="*{flangeThickness}" />
                                        <div class="input-group-append">
                                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.mm}">mm</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="input-group">
                                        <input type="text" class="form-control" th:placeholder="#{axialForceCalc.form.weldedBeam.webDepth}"
                                               th:field="*{webDepth}" />
                                        <div class="input-group-append">
                                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.mm}">mm</span>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" th:placeholder="#{axialForceCalc.form.weldedBeam.webThickness}"
                                               th:field="*{webThickness}" />
                                        <div class="input-group-append">
                                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.mm}">mm</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <div class="input-group">
                                        <input type="text" class="form-control" th:placeholder="#{axialForceCalc.form.weldedBeam.legOfWeld}"
                                               th:field="*{legOfWeld}" />
                                        <div class="input-group-append">
                                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.mm}">mm</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="length" class="col-2 col-form-label">l</label>
                    <div class="col">
                        <div class="input-group">
                            <input type="text" class="form-control" id="length" th:placeholder="#{axialForceCalc.form.memberLength}"
                                   th:field="*{length}" aria-describedby="lengthValidation"
                                   th:classappend="${#fields.hasErrors('length')} ? 'is-invalid'"/>
                            <span class="input-group-text" th:text="#{axialForceCalc.form.units.m}">m</span>
                        </div>
                        <div class="invalid-feedback" id="lengthValidation">
                            <span th:each="err : ${#fields.errors('length')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="effectiveLengthFactorY" class="col-2 col-form-label">&#956;<sub>y</sub></label>
                    <div class="col">
                        <input type="text" class="form-control" id="effectiveLengthFactorY" th:placeholder="#{axialForceCalc.form.effectiveLengthFactorY}"
                               th:field="*{effectiveLengthFactorY}" aria-describedby="estimatedLengthFactorYValidation"
                               th:classappend="${#fields.hasErrors('effectiveLengthFactorY')} ? 'is-invalid'"/>
                        <div class="invalid-feedback" id="estimatedLengthFactorYValidation">
                            <span th:each="err : ${#fields.errors('effectiveLengthFactorY')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="effectiveLengthFactorZ" class="col-2 col-form-label">&#956;<sub>z</sub></label>
                    <div class="col">
                        <input type="text" class="form-control" id="effectiveLengthFactorZ" th:placeholder="#{axialForceCalc.form.effectiveLengthFactorZ}"
                               th:field="*{effectiveLengthFactorZ}" aria-describedby="estimatedLengthFactorZValidation"
                               th:classappend="${#fields.hasErrors('effectiveLengthFactorZ')} ? 'is-invalid'"/>
                        <div class="invalid-feedback" id="estimatedLengthFactorZValidation">
                            <span th:each="err : ${#fields.errors('effectiveLengthFactorZ')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="gammaC" class="col-2 col-form-label">&#947;<sub>c</sub></label>
                    <div class="col">
                        <input type="text" class="form-control" id="gammaC" th:placeholder="#{axialForceCalc.form.workingConditFac}"
                               th:field="*{workingConditionsFactor}" aria-describedby="workingConditionsFactorValidation"
                               th:classappend="${#fields.hasErrors('workingConditionsFactor')} ? 'is-invalid'"/>
                        <div class="invalid-feedback" id="workingConditionsFactorValidation">
                            <span th:each="err : ${#fields.errors('workingConditionsFactor')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="gammaN" class="col-2 col-form-label">&#947;<sub>n</sub></label>
                    <div class="col">
                        <input type="text" class="form-control" id="gammaN" th:placeholder="#{axialForceCalc.form.reliabilityFacResp}"
                               th:field="*{reliabilityFactorForResponsibility}" aria-describedby="reliabilityFactorForResponsibilityValidation"
                               th:classappend="${#fields.hasErrors('reliabilityFactorForResponsibility')} ? 'is-invalid'"/>
                        <div class="invalid-feedback" id="reliabilityFactorForResponsibilityValidation">
                            <span th:each="err : ${#fields.errors('reliabilityFactorForResponsibility')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label for="steel" class="col-2 col-form-label" th:text="#{axialForceCalc.form.steelGrade.name}">Steel</label>
                    <div class="col">
                        <select class="form-select" id="steel" th:field="*{steel}" aria-describedby="steelValidation"
                                th:classappend="${#fields.hasErrors('steel')} ? 'is-invalid'">
                            <option th:value="S235" th:text="#{axialForceCalc.form.steelGrade.S235}">C235</option>
                            <option th:value="S245" th:text="#{axialForceCalc.form.steelGrade.S245}">C245</option>
                            <option th:value="S255" th:text="#{axialForceCalc.form.steelGrade.S255}">C255</option>
                            <option th:value="S275" th:text="#{axialForceCalc.form.steelGrade.S275}">C275</option>
                            <option th:value="S345" th:text="#{axialForceCalc.form.steelGrade.S345}">C345</option>
                        </select>
                        <div class="invalid-feedback" id="steelValidation">
                            <span th:each="err : ${#fields.errors('steel')}" th:text="#{${err}}"></span>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <label class="col-3 col-form-label" th:text="#{axialForceCalc.form.loads.name}">Loads</label>
                    <div class="col">
                        <div class="row mb-1">
                            <label for="moment" class="col-1 col-form-label">M</label>
                            <div class="input-group col">
                                <input type="text" class="form-control" id="moment"  th:placeholder="#{axialForceCalc.form.loads.moment}"
                                       th:field="*{moment}" disabled/>
                                <div class="input-group-append">
                                    <span class="input-group-text"  th:text="#{axialForceCalc.form.units.tM}">t*m</span>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <label for="normalForce" class="col-1 col-form-label">N</label>
                            <div class="input-group col">
                                <input type="text" class="form-control" id="normalForce" th:placeholder="#{axialForceCalc.form.loads.normalForse}"
                                       th:field="*{normalForce}" aria-describedby="normalForceValidation"
                                       th:classappend="${#fields.hasErrors('normalForce')} ? 'is-invalid'"/>
                                <div class="input-group-append">
                                    <span class="input-group-text" th:text="#{axialForceCalc.form.units.t}">t</span>
                                </div>
                                <div class="invalid-feedback" id="normalForceValidation">
                                    <span th:each="err : ${#fields.errors('normalForce')}" th:text="#{${err}}"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-1">
                            <label for="transverseForce" class="col-1 col-form-label">Q</label>
                            <div class="input-group col">
                                <input type="text" class="form-control" id="transverseForce"
                                       th:placeholder="#{axialForceCalc.form.loads.transverseForse}" th:field="*{traverseForce}" disabled/>
                                <div class="input-group-append">
                                    <span class="input-group-text" th:text="#{axialForceCalc.form.units.t}">t</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="col-1 custom-control-input" id="includesOwnWeight"
                                       th:field="*{ownWeightIncluded}" />
                                <label class="col custom-control-label" for="includesOwnWeight" th:text="#{axialForceCalc.form.includeOwnWeight}">Include own weight</label>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row mb-2">
                    <input class="btn btn-primary" type="submit" th:value="#{axialForceCalc.form.calculate}" />
                </div>
            </form>
            <div id="saveBlock">
                <form th:if="${result != null}" th:method="POST" th:action="@{/axial-force-calculation/save}">
                    <div class="row mb-3">

                            <input type="hidden" name="ccwbInputId" th:value="${ccwbInput.id}">
                            <input class="btn btn-success" type="submit" th:value="#{axialForceCalc.form.save}" />
                        </div>
                </form>
            </div>

            </div>
        </div>
        </div>
        <div class="col mx-3">
            <th:block th:if="${result != null}">
                <div id="resultBlock" th:insert="result :: resultBlock">
                </div>
            </th:block>
        </div>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script th:inline="javascript" type="text/javascript">
        const input = [[${ccwbInput}]];
        const profilesByStandard = [[${sections}]];
        const curSectionNumber = [[${ccwbInput.sectionNumber}]];
    </script>
    <script type="text/javascript" th:src="@{/js/ccwb.init.js}"></script>
</body>
</html>